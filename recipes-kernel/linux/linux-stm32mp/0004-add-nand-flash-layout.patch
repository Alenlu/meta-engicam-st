From 5186fa1a7fc1f24700b9731aca659ddb9861222c Mon Sep 17 00:00:00 2001
From: Matteo Lisi <matteo.lisi@engicam.com>
Date: Fri, 13 Aug 2021 11:10:31 +0200
Subject: [PATCH] add nand flash layout

---
 arch/arm/boot/dts/stm32mp157a-ugea512-mx.dts | 21 +++++++++++++++++++-
 1 file changed, 20 insertions(+), 1 deletion(-)

diff --git a/arch/arm/boot/dts/stm32mp157a-ugea512-mx.dts b/arch/arm/boot/dts/stm32mp157a-ugea512-mx.dts
index b378c1424..173eb186a 100644
--- a/arch/arm/boot/dts/stm32mp157a-ugea512-mx.dts
+++ b/arch/arm/boot/dts/stm32mp157a-ugea512-mx.dts
@@ -875,12 +875,31 @@
 	/* USER CODE BEGIN fmc */
 	nand-controller@4,0 {
 		status = "okay";
-
 		nand@0 {
 				reg = <0>;
 				nand-on-flash-bbt;
 				#address-cells = <1>;
 				#size-cells = <1>;
+
+				partition@0 {
+					label = "fsbl";
+					reg = <0x00000000 0x200000>;
+				};
+
+				partition@200000 {
+					label = "fip1";
+					reg = <0x200000 0x400000>;
+				};
+
+				partition@600000 {
+					label = "fip2";
+					reg = <0x600000 0x400000>;
+				};
+
+				partition@A00000 {
+					label = "UBI";
+					reg = <0xA00000 0x1F600000>;
+				};
 		};
 	};
 	/* USER CODE END fmc */
