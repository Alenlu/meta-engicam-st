From eb9ee71566472ef00a36c5c5020b3921dba32172 Mon Sep 17 00:00:00 2001
From: frautel <francesco.utel@engicam.com>
Date: Fri, 10 Sep 2021 15:21:20 +0200
Subject: [PATCH] Added dsi support for starterkit lvds display

---
 fdts/stm32mp157a-icore-starterkit-mx.dts | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

diff --git a/fdts/stm32mp157a-icore-starterkit-mx.dts b/fdts/stm32mp157a-icore-starterkit-mx.dts
index 52ccfc7f7..f911ff0d3 100644
--- a/fdts/stm32mp157a-icore-starterkit-mx.dts
+++ b/fdts/stm32mp157a-icore-starterkit-mx.dts
@@ -186,13 +186,14 @@
 		CLK_CKPER_DISABLED
 		CLK_ETH_PLL3Q
 		CLK_SDMMC12_HCLK6
+		CLK_DSI_DSIPLL
 		CLK_STGEN_HSI
 		CLK_USBPHY_HSE
 		CLK_SPI2S1_DISABLED
 		CLK_SPI2S23_DISABLED
 		CLK_SPI45_DISABLED
 		CLK_SPI6_DISABLED
-		CLK_I2C46_DISABLED
+		CLK_I2C46_PCLK5
 		CLK_SDMMC3_HCLK2
 		CLK_USBO_USBPHY
 		CLK_ADC_DISABLED
@@ -229,6 +230,11 @@
 		reg = <2>;
 		cfg = < 1 49 2 11 1 PQR(1,1,0) >;
 	};
+	pll4:st,pll@3 {
+		compatible = "st,stm32mp1-pll";
+		reg = <3>;
+		cfg = < 1 33 3 4 3 PQR(0,1,0) >;
+	};
 };
 
 &bsec{
@@ -248,6 +254,7 @@
 	DECPROT(STM32MP1_ETZPC_ETH_ID, DECPROT_NS_RW, DECPROT_UNLOCK)
 	DECPROT(STM32MP1_ETZPC_TT_FDCAN_ID, DECPROT_NS_RW, DECPROT_UNLOCK)
 	DECPROT(STM32MP1_ETZPC_I2C2_ID, DECPROT_NS_RW, DECPROT_UNLOCK)
+	DECPROT(STM32MP1_ETZPC_I2C6_ID, DECPROT_NS_RW, DECPROT_UNLOCK)
 	DECPROT(STM32MP1_ETZPC_SAI2_ID, DECPROT_NS_RW, DECPROT_UNLOCK)
 	DECPROT(STM32MP1_ETZPC_SDMMC3_ID, DECPROT_NS_RW, DECPROT_UNLOCK)
 	DECPROT(STM32MP1_ETZPC_DLYBSD3_ID, DECPROT_NS_RW, DECPROT_UNLOCK)
